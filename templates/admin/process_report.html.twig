{% extends '@EasyAdmin/page/content.html.twig' %}

{% block page_title %}å¤„ç†ä¸¾æŠ¥ - {{ report }}{% endblock %}

{% block content_header_wrapper %}
    <section class="content-header">
        <div class="content-header-title">
            <h1 class="title">
                <i class="fa fa-gavel"></i>
                å¤„ç†ä¸¾æŠ¥
            </h1>
        </div>

        <div class="page-actions">
            <div class="global-actions">
                <a href="{{ backUrl }}" class="btn btn-secondary">
                    <i class="fa fa-arrow-left"></i>
                    è¿”å›åˆ—è¡¨
                </a>
            </div>
        </div>
    </section>
{% endblock %}

{% block main %}
<div class="row">
    <div class="col-lg-6 col-12">
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fa fa-info-circle"></i>
                    ä¸¾æŠ¥ä¿¡æ¯
                </h5>
            </div>
            <div class="card-body p-0">
                <table class="table table-striped table-hover mb-0">
                    <tbody>
                        <tr>
                            <th style="width: 35%;">ä¸¾æŠ¥ID</th>
                            <td>{{ report.id }}</td>
                        </tr>
                        <tr>
                            <th>ä¸¾æŠ¥ç”¨æˆ·</th>
                            <td>{{ report.reporterUser }}</td>
                        </tr>
                        <tr>
                            <th>è¢«ä¸¾æŠ¥å†…å®¹</th>
                            <td>
                                <div class="text-truncate" style="max-width: 400px;" title="{{ report.reportedContent }}">
                                    {{ report.reportedContent }}
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th>ä¸¾æŠ¥æ—¶é—´</th>
                            <td>{{ report.reportTime|date('Y-m-d H:i:s') }}</td>
                        </tr>
                        <tr>
                            <th>ä¸¾æŠ¥ç†ç”±</th>
                            <td>{{ report.reportReason }}</td>
                        </tr>
                        <tr>
                            <th>å½“å‰çŠ¶æ€</th>
                            <td>
                                <span class="badge bg-info">{{ report.processStatus.label }}</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="col-lg-6 col-12">
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fa fa-edit"></i>
                    å¤„ç†æ“ä½œ
                </h5>
            </div>
            <div class="card-body">
                <form method="post" action="{{ ea_url().setController('AIContentAuditBundle\\Controller\\Admin\\ReportCrudController').setAction('submitProcess').set('entityId', report.id) }}">
                    <div class="mb-3">
                        <label for="processResult" class="form-label required">å¤„ç†ç»“æœ</label>
                        <textarea
                            class="form-control"
                            id="processResult"
                            name="processResult"
                            rows="6"
                            required
                            placeholder="è¯·è¯¦ç»†æè¿°å¤„ç†ç»“æœ..."></textarea>
                    </div>

                    <div class="mb-4">
                        <label for="action" class="form-label required">å¤„ç†åŠ¨ä½œ</label>
                        <select class="form-select" id="action" name="action" required>
                            <option value="">è¯·é€‰æ‹©å¤„ç†åŠ¨ä½œ</option>
                            <option value="approve">âœ“ é€šè¿‡ - ä¸¾æŠ¥æ— æ•ˆ</option>
                            <option value="reject_content">âœ— é©³å› - åˆ é™¤è¢«ä¸¾æŠ¥å†…å®¹</option>
                            <option value="warn_user">âš  è­¦å‘Š - è­¦å‘Šè¢«ä¸¾æŠ¥ç”¨æˆ·</option>
                            <option value="ban_user">ğŸš« å°ç¦ - å°ç¦è¢«ä¸¾æŠ¥ç”¨æˆ·</option>
                        </select>
                    </div>

                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-success">
                            <i class="fa fa-check"></i>
                            æäº¤å¤„ç†ç»“æœ
                        </button>
                        <a href="{{ backUrl }}" class="btn btn-secondary">
                            <i class="fa fa-times"></i>
                            å–æ¶ˆ
                        </a>
                    </div>

                    <input type="hidden" name="_token" value="{{ csrf_token('submit_process_' ~ report.id) }}">
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}